(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-index"],{"085d":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".uni-list-cell[data-v-4613e746]{overflow:hidden}.uni-media-list-logo[data-v-4613e746]{height:%?100?%;width:%?100?%}.search .content[data-v-4613e746]{padding-left:%?20?%;height:%?60?%}.header[data-v-4613e746]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;padding:10px 15px;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.input-view[data-v-4613e746]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;background-color:#e7e7e7;height:30px;border-radius:5px;padding:0 10px;-webkit-box-flex:1;-webkit-flex:1;flex:1}.input[data-v-4613e746]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:0 5px;height:24px;line-height:24px;font-size:16px}.red_num[data-v-4613e746]{position:absolute;height:%?34?%;top:%?7?%;left:%?120?%;font-size:%?23?%!important}\n\n/**\n.uni-media-list-body {\n\theight: auto;\n}\n*/.uni-swipe-action[data-v-4613e746],\n.uni-swipe[data-v-4613e746],\n.uni-view[data-v-4613e746],\n.uni-media-list[data-v-4613e746]{width:%?750?%!important}.action_main[data-v-4613e746]{position:fixed;top:55px;\n\nwidth:%?750?%;height:%?1080?%;z-index:10000}.action_base[data-v-4613e746]{position:absolute;right:%?15?%;width:%?300?%;top:%?-15?%;background:#36363d;border-radius:%?10?%}.sj[data-v-4613e746]{position:fixed;top:%?-28?%;right:%?26?%;\n\n\nwidth:0;height:0;border-left:%?20?% solid transparent;border-right:%?20?% solid transparent;border-bottom:%?20?% solid #36363d}.action_item[data-v-4613e746]{color:#e5e5e5;height:%?100?%;line-height:%?100?%;margin-left:%?45?%;border-bottom:1px solid #3e3e3e}.action_icon[data-v-4613e746]{width:%?45?%;height:%?45?%;display:inline-block;vertical-align:middle}.action_item[data-v-4613e746]:last-child{border:none}.action_item_text[data-v-4613e746]{font-size:%?30?%}",""]),t.exports=i},1697:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var a={uniSwipeAction:e("9ceb").default,uniSwipeActionItem:e("eaa8").default,uniBadge:e("c5bd").default},n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page"},[e("uni-search-bar",{ref:"searchBar",attrs:{placeholder:"搜索聊天记录",show:!1},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.search.apply(void 0,arguments)},search:function(i){arguments[0]=i=t.$handleEvent(i),t.search.apply(void 0,arguments)}}}),t.list.length?e("v-uni-view",{staticClass:"uni-list"},[e("uni-swipe-action",t._l(t.list,(function(i,a){return e("uni-swipe-action-item",{key:a,staticClass:"uni-list-cell",attrs:{"right-options":t.swipeData(i,a),"auto-close":!1},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.swipeAction.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"uni-media-list",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goMessage(i.list_id,a,i.no_reader_num,i.chat_id)}}},[e("v-uni-view",{staticClass:"uni-media-list-logo"},[e("v-uni-image",{staticStyle:{"border-radius":"10px"},attrs:{src:t.staticPhoto+i.photo_path+"?_="+t.imgRan,"lazy-load":!0,"data-index":a},on:{error:function(i){arguments[0]=i=t.$handleEvent(i),t.imageError.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"red_num"},[e("uni-badge",{attrs:{text:i.no_reader_num,type:"error"}})],1),e("v-uni-view",{staticClass:"uni-media-list-body"},[e("v-uni-view",{staticClass:"uni-media-list-text-top"},[e("v-uni-text",[t._v(t._s(t.msgHandle(i.show_name+"",12)))]),e("v-uni-text",{staticStyle:{float:"right",color:"#8f8f94","font-size":"23upx"}},[t._v(t._s(t.timestampFormat(i.time)))])],1),e("v-uni-view",{staticClass:"uni-media-list-text-bottom uni-ellipsis"},[t._v(t._s(i.last_msg+""))])],1)],1)],1)})),1)],1):t._e(),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showActionMenu,expression:"showActionMenu"}],class:["action_main animated faster",t.action_menu?"bounceInDown":"bounceOutUp"],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.actionMain.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"action_base"},[e("v-uni-view",{staticClass:"sj"}),e("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goAction(0)}}},[e("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[e("v-uni-image",{attrs:{src:"../../static/theme/default/chat/chat.png","lazy-load":!0}})],1),e("v-uni-text",{staticClass:"action_item_text"},[t._v("发起群聊")])],1),e("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goAction(1)}}},[e("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[e("v-uni-image",{attrs:{src:"../../static/theme/default/chat/add_friend.png","lazy-load":!0}})],1),e("v-uni-text",{staticClass:"action_item_text"},[t._v("添加好友")])],1),e("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goAction(2)}}},[e("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[e("v-uni-image",{attrs:{src:"/static/theme/default/store.png","lazy-load":!0}})],1),e("v-uni-text",{staticClass:"action_item_text"},[t._v("我的收藏")])],1),e("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goPath("../my/pay/pay")}}},[e("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[e("v-uni-image",{attrs:{src:"../../static/theme/default/chat/in_out.png","lazy-load":!0}})],1),e("v-uni-text",{staticClass:"action_item_text"},[t._v("收付款")])],1)],1)],1)],1)},o=[]},a977:function(t,i,e){"use strict";var a=e("b6b9"),n=e.n(a);n.a},b4a2:function(t,i,e){"use strict";e.r(i);var a=e("ef10"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},b6b9:function(t,i,e){var a=e("085d");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("d790ae72",a,!0,{sourceMap:!1,shadowMode:!1})},d443:function(t,i,e){"use strict";e.r(i);var a=e("1697"),n=e("b4a2");for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("a977");var s,c=e("f0c5"),l=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"4613e746",null,!1,a["a"],s);i["default"]=l.exports},ef10:function(t,i,e){"use strict";(function(t){var a=e("4ea4");e("ac1f"),e("5319"),e("498a"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;a(e("c6865"));var n=a(e("f0b5")),o=a(e("c5bd")),s=a(e("9ceb")),c=a(e("eaa8")),l=a(e("7f23")),u=a(e("7dec")),d=a(e("3b4d")),r=a(e("d799")),h=a(e("2bf1")),f=a(e("67ab")),v={components:{uniIcon:n.default,uniBadge:o.default,uniSwipeAction:s.default,uniSwipeActionItem:c.default,uniSearchBar:f.default},data:function(){return{list:[],search_list:[],list_index:"",action_menu:!1,action_menu_num:0,options:[{text:"取消",style:{backgroundColor:"#007aff"}},{text:"删除",style:{backgroundColor:"#dd524d"}}]}},onShow:function(){u.default.routeTabBarHook(),uni.$off("data_chat_list");var i=this,e=r.default.localData("chat_list");uni.$on("data_chat_list",(function(e){i.list=e,t("log",e[0].last_msg," at pages/chat/index.vue:168"),i.search_list=i.list,t("log","接收到新数据...."," at pages/chat/index.vue:170")})),e?i.list=e:l.default.getChatList(),i.action_menu=!1},onLoad:function(){},onUnload:function(){uni.$off("data_chat_list")},onPullDownRefresh:function(){l.default.getChatList(),setTimeout((function(){uni.stopPullDownRefresh()}),300)},onHide:function(){this.keyword&&(this.$refs.searchBar.clear(),this.list=this.search_list)},computed:{showActionMenu:function(){return this.action_menu},staticPhoto:function(){return r.default.staticPhoto()},imgRan:function(){return Math.random()}},methods:{search:function(i){i=i.trim();var e=this;if(e.keyword=i,t("log",!i," at pages/chat/index.vue:221"),!i)return e.list=e.search_list,!0;l.default.serchChatMsg({chat_msg:i},(function(t){e.list=t}))},goPath:function(t){t&&uni.navigateTo({url:t})},imageError:function(t){var i=t.currentTarget.dataset.index;this.list[i].photo_path="/default_photo_path.png"},msgHandle:function(t,i){return void 0==i&&(i=16),t?(t=t.replace(/&lt;/g,"<"),t.length>i?t.substr(0,i)+"...":t):""},timestampFormat:function(t){return d.default.timestampFormat(t)},goAction:function(t){var i="";switch(t){case 0:i="../friend/index_list?list_id=0";break;case 1:i="../friend/add";break;case 2:i="../my/store";break;default:return}uni.navigateTo({url:i,animationType:"slide-in-bottom"})},actionMain:function(){this.action_menu=!this.action_menu,this.action_menu_num++},openedAction:function(t){this.list_index=t},swipeAction:function(i){var e=i.content.number,a=this,n=a.list[e].list_id;if(n){var o=a.list[e].top;t("log","top",o," at pages/chat/index.vue:289");var s=1==o?0:1;switch(t("log","value",s," at pages/chat/index.vue:291"),i.index){case 0:a.$httpSend({path:"/im/message/chatTop ",data:{list_id:n,value:s},success:function(){l.default.getChatList()}});break;case 1:a.$httpSend({path:"/im/chat/deleteChat",data:{list_id:n},success:function(t){l.default.getChatList()}});break;default:break}}},swipeData:function(t,i){return[{text:1==t.top?"取消置顶":"置顶",number:i,style:{}},{text:"删除",number:i,style:{backgroundColor:"rgb(255,58,49)"}}]},goMessage:function(i,e,a,n){a>0&&(l.default.getChatData({send_data:{list_id:i,time:0,is_up:1},is_action_data:1}),this.list[e].no_reader_num=0,r.default.localData("chat_list",this.list),d.default.updataNoReader(i),d.default.setStatusTips()),t("log","chat_id",n," at pages/chat/index.vue:354"),r.default.localData("message_list_id",i),uni.navigateTo({url:"./message?list_id="+i})},goScanCode:function(){var t=this;t.action_menu=!1,h.default.scanCode()}},watch:{},onNavigationBarButtonTap:function(t){this.action_menu=!this.action_menu}};i.default=v}).call(this,e("0de9")["log"])}}]);